{
  "version": 4,
  "terraform_version": "1.0.11",
  "serial": 18,
  "lineage": "f86123eb-b627-08b2-1073-f0ea4b7305ad",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "ibm_iam_authorization_policy",
      "name": "mongo-kms",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": null,
            "id": "e0155d5d-78e9-4fa2-9454-aca32d3d3239",
            "roles": [
              "Reader",
              "Authorization Delegator"
            ],
            "source_resource_group_id": "",
            "source_resource_instance_id": "",
            "source_resource_type": "",
            "source_service_account": "0b5a00334eaf9eb9339d2ab48f7326b4",
            "source_service_name": "databases-for-mongodb",
            "target_resource_group_id": "",
            "target_resource_instance_id": "",
            "target_resource_type": "",
            "target_service_name": "kms",
            "version": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ibm_kp_key",
      "name": "my_kp_key",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "crn": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae:key:c8353e03-be18-4b3b-9857-3fc71c2765f1",
            "encrypted_nonce": "",
            "force_delete": false,
            "id": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae:key:c8353e03-be18-4b3b-9857-3fc71c2765f1",
            "iv_value": "",
            "key_id": "c8353e03-be18-4b3b-9857-3fc71c2765f1",
            "key_name": "tf-mongo-encryption-key",
            "key_protect_id": "7f8717e7-c8bc-4100-998b-70520bfa34ae",
            "payload": "",
            "resource_controller_url": "https://cloud.ibm.com/services/kms/crn%3Av1%3Abluemix%3Apublic%3Akms%3Aeu-de%3Aa%2F0b5a00334eaf9eb9339d2ab48f7326b4%3A7f8717e7-c8bc-4100-998b-70520bfa34ae%3A%3A",
            "resource_crn": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae:key:c8353e03-be18-4b3b-9857-3fc71c2765f1",
            "resource_group_name": null,
            "resource_name": "tf-mongo-encryption-key",
            "resource_status": "1",
            "standard_key": false,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "ibm_resource_group.resource_group",
            "ibm_resource_instance.kp_instance"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ibm_resource_group",
      "name": "resource_group",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2021-11-30T17:23:35.524Z",
            "crn": "crn:v1:bluemix:public:resource-controller::a/0b5a00334eaf9eb9339d2ab48f7326b4::resource-group:fd61f658069948ac8cd71c5d4c5a72e3",
            "default": false,
            "id": "fd61f658069948ac8cd71c5d4c5a72e3",
            "name": "tf-mongo",
            "payment_methods_url": "/v2/resource_groups/fd61f658069948ac8cd71c5d4c5a72e3/payment_methods",
            "quota_id": "a3d7b8d01e261c24677937c29ab33f3c",
            "quota_url": "/v2/quota_definitions/a3d7b8d01e261c24677937c29ab33f3c",
            "resource_linkages": [],
            "state": "ACTIVE",
            "tags": null,
            "teams_url": "/v2/resource_groups/fd61f658069948ac8cd71c5d4c5a72e3/teams",
            "updated_at": "2021-11-30T17:23:35.524Z"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ibm_resource_instance",
      "name": "kp_instance",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "0b5a00334eaf9eb9339d2ab48f7326b4",
            "allow_cleanup": false,
            "created_at": "2021-11-30T17:23:49.957Z",
            "created_by": "IBMid-270002R30A",
            "crn": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae::",
            "dashboard_url": "/keyprotect",
            "deleted_at": null,
            "deleted_by": "",
            "extensions": {
              "endpoints.private": "https://private.eu-de.kms.cloud.ibm.com",
              "endpoints.public": "https://eu-de.kms.cloud.ibm.com"
            },
            "guid": "7f8717e7-c8bc-4100-998b-70520bfa34ae",
            "id": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae::",
            "last_operation": {
              "async": "false",
              "description": "Completed create instance operation",
              "state": "succeeded",
              "type": "create"
            },
            "location": "eu-de",
            "locked": false,
            "name": "tf-mongo-key-protect",
            "parameters": null,
            "plan": "tiered-pricing",
            "plan_history": [
              {
                "resource_plan_id": "eedd3585-90c6-4c8f-be3d-062069e99fc3",
                "start_date": "2021-11-30T17:23:49.957Z"
              }
            ],
            "resource_aliases_url": "/v2/resource_instances/7f8717e7-c8bc-4100-998b-70520bfa34ae/resource_aliases",
            "resource_bindings_url": "/v2/resource_instances/7f8717e7-c8bc-4100-998b-70520bfa34ae/resource_bindings",
            "resource_controller_url": "https://cloud.ibm.com/services/",
            "resource_crn": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae::",
            "resource_group_crn": "crn:v1:bluemix:public:resource-controller::a/0b5a00334eaf9eb9339d2ab48f7326b4::resource-group:fd61f658069948ac8cd71c5d4c5a72e3",
            "resource_group_id": "fd61f658069948ac8cd71c5d4c5a72e3",
            "resource_group_name": "crn:v1:bluemix:public:resource-controller::a/0b5a00334eaf9eb9339d2ab48f7326b4::resource-group:fd61f658069948ac8cd71c5d4c5a72e3",
            "resource_id": "ee41347f-b18e-4ca6-bf80-b5467c63f9a6",
            "resource_keys_url": "/v2/resource_instances/7f8717e7-c8bc-4100-998b-70520bfa34ae/resource_keys",
            "resource_name": "tf-mongo-key-protect",
            "resource_plan_id": "eedd3585-90c6-4c8f-be3d-062069e99fc3",
            "resource_status": "active",
            "restored_at": null,
            "restored_by": "",
            "scheduled_reclaim_at": null,
            "scheduled_reclaim_by": "",
            "service": "kms",
            "service_endpoints": null,
            "state": "active",
            "status": "active",
            "sub_type": "kms",
            "tags": [
              "mongo",
              "tf"
            ],
            "target_crn": "crn:v1:bluemix:public:globalcatalog::::deployment:eedd3585-90c6-4c8f-be3d-062069e99fc3%3Aeu-de",
            "timeouts": null,
            "type": "service_instance",
            "update_at": "2021-11-30T17:23:51.264Z",
            "update_by": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "ibm_resource_group.resource_group"
          ]
        }
      ]
    },
    {
      "module": "module.database_mongo",
      "mode": "managed",
      "type": "ibm_database",
      "name": "mongodb",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adminpassword": "Passw0rd01",
            "adminuser": "admin",
            "auto_scaling": [
              {
                "cpu": [
                  {
                    "rate_increase_percent": 10,
                    "rate_limit_count_per_member": 30,
                    "rate_period_seconds": 900,
                    "rate_units": "count"
                  }
                ],
                "disk": [
                  {
                    "capacity_enabled": false,
                    "free_space_less_than_percent": 10,
                    "io_above_percent": 90,
                    "io_enabled": false,
                    "io_over_period": "15m",
                    "rate_increase_percent": 10,
                    "rate_limit_mb_per_member": 3670016,
                    "rate_period_seconds": 900,
                    "rate_units": "mb"
                  }
                ],
                "memory": [
                  {
                    "io_above_percent": 90,
                    "io_enabled": false,
                    "io_over_period": "15m",
                    "rate_increase_percent": 10,
                    "rate_limit_mb_per_member": 114688,
                    "rate_period_seconds": 900,
                    "rate_units": "mb"
                  }
                ]
              }
            ],
            "backup_encryption_key_crn": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae:key:c8353e03-be18-4b3b-9857-3fc71c2765f1",
            "backup_id": null,
            "configuration": null,
            "configuration_schema": null,
            "connectionstrings": [
              {
                "bundlebase64": "",
                "bundlename": "",
                "certbase64": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURIVENDQWdXZ0F3SUJBZ0lVVmlhMWZrWElsTXhGY2lob3lncWg2Yit6N0pNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0hqRWNNQm9HQTFVRUF3d1RTVUpOSUVOc2IzVmtJRVJoZEdGaVlYTmxjekFlRncweE9ERXdNVEV4TkRRNApOVEZhRncweU9ERXdNRGd4TkRRNE5URmFNQjR4SERBYUJnTlZCQU1NRTBsQ1RTQkRiRzkxWkNCRVlYUmhZbUZ6ClpYTXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFESkYxMlNjbTJGUmpQb2N1bmYKbmNkUkFMZDhJRlpiWDhpbDM3MDZ4UEV2b3ZpMTRHNGVIRWZuT1JRY2g3VElPR212RWxITVllbUtFT3Z3K0VZUApmOXpqU1IxNFVBOXJYeHVaQmgvZDlRa2pjTkw2YmMvbUNUOXpYbmpzdC9qRzJSbHdmRU1lZnVIQWp1T3c4bkJuCllQeFpiNm1ycVN6T2FtSmpnVVp6c1RMeHRId21yWkxuOGhlZnhITlBrdGFVMUtFZzNQRkJxaWpDMG9uWFpnOGMKanpZVVVXNkpBOWZZcWJBL1YxMkFsT3AvUXhKUVVoZlB5YXozN0FEdGpJRkYybkxVMjBicWdyNWhqTjA4SjZQUwpnUk5hNXc2T1N1RGZiZ2M4V3Z3THZzbDQvM281akFVSHp2OHJMaWF6d2VPYzlTcDBKd3JHdUJuYTFPYm9mbHU5ClM5SS9BZ01CQUFHalV6QlJNQjBHQTFVZERnUVdCQlJGejFFckZFSU1CcmFDNndiQjNNMHpuYm1IMmpBZkJnTlYKSFNNRUdEQVdnQlJGejFFckZFSU1CcmFDNndiQjNNMHpuYm1IMmpBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUEwRwpDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ2t4NVJzbk9PMWg0dFJxRzh3R21ub1EwOHNValpsRXQvc2tmR0pBL2RhClUveEZMMndhNjljTTdNR1VMRitoeXZYSEJScnVOTCtJM1ROSmtVUEFxMnNhakZqWEtCeVdrb0JYYnRyc2ZKckkKQWhjZnlzN29tdjJmb0pHVGxJY0FybnBCL0p1bEZITmM1YXQzVk1rSTlidEh3ZUlYNFE1QmdlVlU5cjdDdlArSgpWRjF0YWxSUVpKandyeVhsWGJvQ0c0MTU2TUtwTDIwMUwyV1dqazBydlBVWnRKcjhmTmd6M24wb0x5MFZ0Zm93Ck1yUFh4THk5TlBqOGlzT3V0ckxEMjlJWTJBMFY0UmxjSXhTMEw3c1ZPeTB6RDZwbXpNTVFNRC81aWZ1SVg2YnEKbEplZzV4akt2TytwbElLTWhPU1F5dTRUME1NeTZmY2t3TVpPK0liR3JDZHIKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=",
                "certname": "8b486a8f-517b-4a3b-a2f4-fa8b7d4cf0b3",
                "composed": "mongodb://admin:$PASSWORD@59b9bbd6-25cd-4b0a-8722-23c0dce2ceea-0.c673ik6f0bicmuuesen0.databases.appdomain.cloud:30178,59b9bbd6-25cd-4b0a-8722-23c0dce2ceea-1.c673ik6f0bicmuuesen0.databases.appdomain.cloud:30178,59b9bbd6-25cd-4b0a-8722-23c0dce2ceea-2.c673ik6f0bicmuuesen0.databases.appdomain.cloud:30178/ibmclouddb?authSource=admin\u0026replicaSet=replset",
                "database": "ibmclouddb",
                "hosts": [
                  {
                    "hostname": "59b9bbd6-25cd-4b0a-8722-23c0dce2ceea-0.c673ik6f0bicmuuesen0.databases.appdomain.cloud",
                    "port": "30178"
                  },
                  {
                    "hostname": "59b9bbd6-25cd-4b0a-8722-23c0dce2ceea-1.c673ik6f0bicmuuesen0.databases.appdomain.cloud",
                    "port": "30178"
                  },
                  {
                    "hostname": "59b9bbd6-25cd-4b0a-8722-23c0dce2ceea-2.c673ik6f0bicmuuesen0.databases.appdomain.cloud",
                    "port": "30178"
                  }
                ],
                "name": "admin",
                "password": "",
                "path": "/ibmclouddb",
                "queryoptions": "?authSource=admin\u0026replicaSet=replset",
                "scheme": "mongodb"
              }
            ],
            "groups": [
              {
                "count": 3,
                "cpu": [
                  {
                    "allocation_count": 0,
                    "can_scale_down": true,
                    "is_adjustable": true,
                    "minimum_count": 9,
                    "step_size_count": 3,
                    "units": "count"
                  }
                ],
                "disk": [
                  {
                    "allocation_mb": 30720,
                    "can_scale_down": false,
                    "is_adjustable": true,
                    "minimum_mb": 30720,
                    "step_size_mb": 3072,
                    "units": "mb"
                  }
                ],
                "group_id": "member",
                "memory": [
                  {
                    "allocation_mb": 3072,
                    "can_scale_down": true,
                    "is_adjustable": true,
                    "minimum_mb": 3072,
                    "step_size_mb": 384,
                    "units": "mb"
                  }
                ]
              }
            ],
            "guid": "59b9bbd6-25cd-4b0a-8722-23c0dce2ceea",
            "id": "crn:v1:bluemix:public:databases-for-mongodb:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:59b9bbd6-25cd-4b0a-8722-23c0dce2ceea::",
            "key_protect_instance": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae::",
            "key_protect_key": "crn:v1:bluemix:public:kms:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:7f8717e7-c8bc-4100-998b-70520bfa34ae:key:c8353e03-be18-4b3b-9857-3fc71c2765f1",
            "location": "eu-de",
            "members_cpu_allocation_count": 0,
            "members_disk_allocation_mb": 30720,
            "members_memory_allocation_mb": 3072,
            "name": "tf-mongo-mongo",
            "node_count": 3,
            "node_cpu_allocation_count": 0,
            "node_disk_allocation_mb": 10240,
            "node_memory_allocation_mb": 1024,
            "plan": "standard",
            "plan_validation": null,
            "point_in_time_recovery_deployment_id": null,
            "point_in_time_recovery_time": null,
            "remote_leader_id": null,
            "resource_controller_url": "https://cloud.ibm.com/services/crn%3Av1%3Abluemix%3Apublic%3Adatabases-for-mongodb%3Aeu-de%3Aa%2F0b5a00334eaf9eb9339d2ab48f7326b4%3A59b9bbd6-25cd-4b0a-8722-23c0dce2ceea%3A%3A",
            "resource_crn": "crn:v1:bluemix:public:databases-for-mongodb:eu-de:a/0b5a00334eaf9eb9339d2ab48f7326b4:59b9bbd6-25cd-4b0a-8722-23c0dce2ceea::",
            "resource_group_id": "fd61f658069948ac8cd71c5d4c5a72e3",
            "resource_group_name": "crn:v1:bluemix:public:resource-controller::a/0b5a00334eaf9eb9339d2ab48f7326b4::resource-group:fd61f658069948ac8cd71c5d4c5a72e3",
            "resource_name": "tf-mongo-mongo",
            "resource_status": "active",
            "service": "databases-for-mongodb",
            "service_endpoints": "public",
            "status": "active",
            "tags": [
              "mongo",
              "tf"
            ],
            "timeouts": null,
            "users": [],
            "version": "4.2",
            "whitelist": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "ibm_iam_authorization_policy.mongo-kms",
            "ibm_kp_key.my_kp_key",
            "ibm_resource_group.resource_group",
            "ibm_resource_instance.kp_instance"
          ]
        }
      ]
    }
  ]
}
